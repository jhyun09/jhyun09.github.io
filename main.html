<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Post Board of All</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans KR', sans-serif;
      background-image: url('{{ url_for("static", filename="images/main1.jpg") }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      color: white;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      backdrop-filter: brightness(0.85);
    }

    header {
      position: absolute;
      top: 20px;
      left: 40px;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .auth {
      position: absolute;
      top: 20px;
      right: 40px;
    }

    .auth a {
      color: white;
      text-decoration: none;
      margin-left: 1.2rem;
      font-weight: bold;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 2rem;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
    }

    .board-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .board-links a {
      text-decoration: none;
      padding: 0.8rem 1.6rem;
      background: rgba(255, 255, 255, 0.85);
      color: #333;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .board-links a:hover {
      background: white;
    }

    .notice {
      font-size: 1.2rem;
      font-weight: bold;
      color: #fdd;
      background-color: rgba(0,0,0,0.4);
      padding: 1rem 2rem;
      border-radius: 10px;
      display: inline-block;
    }
  </style>
</head>

<body class="main-background">
  <p>ê´€ë¦¬ì ì—¬ë¶€: {{ session.get('is_admin') }}</p>
  <a href="{{ url_for('static', filename='memorys/story1.htm') }}" target="_blank" class="link-white">ğŸ  ì¶”ì–µ</a>

  <header>ğŸ“‹ Post Board of All</header>

  <div class="auth">
    {% if session.get('user_id') %}
      <span>ì•ˆë…•í•˜ì„¸ìš”, {{ session.get('username') or 'íšŒì›' }}ë‹˜</span>
      <a href="{{ url_for('auth.logout') }}">ğŸ”“ ë¡œê·¸ì•„ì›ƒ</a>
      {% if session.get('is_admin') %}
        <a href="{{ url_for('admin.admin_dashboard') }}" class="admin-btn" style="color: #f44; font-weight: bold; margin-left: 1rem;">ğŸ›  ê´€ë¦¬ì í˜ì´ì§€</a>
      {% endif %}
    {% else %}
      <!-- ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… ë²„íŠ¼ í‘œì‹œ -->
      <a href="{{ url_for('auth.login') }}">ë¡œê·¸ì¸</a>
      <a href="{{ url_for('auth.signup') }}">íšŒì›ê°€ì…</a>
    {% endif %}
  </div>

  <h1>ì–´ì„œì˜¤ì„¸ìš”, ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ë‹´ì•„ë³´ì„¸ìš” âœ¨</h1>

  {% set icon_map = {
    'ììœ ê²Œì‹œíŒ': 'ğŸ“',
    'ì´ì•¼ê¸°ê²Œì‹œíŒ': 'ğŸ“š',
    'ì‚¬ì§„ê²Œì‹œíŒ': 'ğŸ“¸',
    'ìŠµì‘ê²Œì‹œíŒ': 'ğŸ–‹ï¸',
    'ì­ˆì•¼ë‘ê²Œì‹œíŒ': 'ğŸ’•',
    'ìš°ë¦¬ê²Œì‹œíŒ': 'ğŸ–‹ï¸',
    'ìš°ë¦¬ì‚¬ì§„': 'ğŸ“¸'
  } %}

  <!-- ğŸ†• ìƒˆë¡œ ë§Œë“  ê²Œì‹œíŒ ë¨¼ì € í‘œì‹œ -->
  {% if session.get('user_id') %}
    <h2 style="margin-top: 3rem;">ğŸ†• NEW ê²Œì‹œíŒ</h2>
    <div class="board-links">
      {% for cat in custom_categories %}
        <a href="{{ url_for('post.index', category=cat.name) }}">
          <span class="emoji-badge">{{ icon_map.get(cat.name, 'ğŸ“¸') }}</span> {{ cat.name }}
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="notice">ğŸ›‘ ê²Œì‹œíŒì€ ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
  {% endif %}

  {% if session.get('user_id') and default_categories %}
    <h2 style="margin-top: 3rem;">ğŸ“‚ ì˜›ë‚  ë³µêµ¬ ê²Œì‹œíŒ</h2>
    <div class="board-links">
      {% for name in ['ììœ ê²Œì‹œíŒ', 'ì´ì•¼ê¸°ê²Œì‹œíŒ', 'ì‚¬ì§„ê²Œì‹œíŒ', 'ìŠµì‘ê²Œì‹œíŒ', 'ì­ˆì•¼ë‘ê²Œì‹œíŒ'] %}
        {% for cat in default_categories if cat.name == name %}
          <a href="{{ url_for('post.index', category=cat.name) }}">
            <span class="emoji-badge">{{ icon_map.get(cat.name, 'ğŸ“Œ') }}</span> {{ cat.name }}
          </a>
        {% endfor %}
      {% endfor %}
    </div>
  {% endif %}
</body>
</html>
